{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/Test%20Technique/Frontend/frontend/components/DocumentUpload.tsx"],"sourcesContent":["import {\r\n    Controller,\r\n    Get,\r\n    Post,\r\n    Delete,\r\n    Param,\r\n    Body,\r\n    Res,\r\n    HttpStatus,\r\n  } from '@nestjs/common';\r\n  import { Response } from 'express';\r\n  import { ReportsService, ReportStatus } from './reports.service';\r\n  import { ReportType } from '../ai-agents/ai-agents.service';\r\n  import { ApiTags, ApiOperation, ApiBody } from '@nestjs/swagger';\r\n  \r\n  class CreateReportDto {\r\n    type: ReportType;\r\n    documentIds: string[];\r\n  }\r\n  \r\n  @ApiTags('reports')\r\n  @Controller('reports')\r\n  export class ReportsController {\r\n    constructor(private readonly reportsService: ReportsService) {}\r\n  \r\n    @Post()\r\n    @ApiOperation({ summary: 'Crée une nouvelle demande de rapport' })\r\n    @ApiBody({ type: CreateReportDto })\r\n    async createReport(@Body() createReportDto: CreateReportDto) {\r\n      const report = await this.reportsService.createReport(\r\n        createReportDto.type,\r\n        createReportDto.documentIds,\r\n      );\r\n      return report;\r\n    }\r\n  \r\n    @Post(':id/generate')\r\n    @ApiOperation({ summary: 'Génère un rapport (synchrone)' })\r\n    async generateReport(@Param('id') id: string) {\r\n      return this.reportsService.generateReport(id);\r\n    }\r\n  \r\n    @Get(':id/stream')\r\n    @ApiOperation({ summary: 'Génère un rapport en streaming' })\r\n    async streamReport(@Param('id') id: string, @Res() res: Response) {\r\n      res.setHeader('Content-Type', 'text/event-stream');\r\n      res.setHeader('Cache-Control', 'no-cache');\r\n      res.setHeader('Connection', 'keep-alive');\r\n  \r\n      try {\r\n        for await (const chunk of this.reportsService.generateReportStream(id)) {\r\n          res.write(`data: ${JSON.stringify({ chunk })}\\n\\n`);\r\n        }\r\n        res.write(`data: ${JSON.stringify({ done: true })}\\n\\n`);\r\n        res.end();\r\n      } catch (error) {\r\n        res.write(`data: ${JSON.stringify({ error: error.message })}\\n\\n`);\r\n        res.end();\r\n      }\r\n    }\r\n  \r\n    @Get()\r\n    @ApiOperation({ summary: 'Récupère tous les rapports' })\r\n    async getAllReports() {\r\n      return this.reportsService.getAllReports();\r\n    }\r\n  \r\n    @Get(':id')\r\n    @ApiOperation({ summary: 'Récupère un rapport par son ID' })\r\n    async getReport(@Param('id') id: string) {\r\n      return this.reportsService.getReport(id);\r\n    }\r\n  \r\n    @Delete(':id')\r\n    @ApiOperation({ summary: 'Supprime un rapport' })\r\n    async deleteReport(@Param('id') id: string) {\r\n      this.reportsService.deleteReport(id);\r\n      return { message: 'Rapport supprimé avec succès' };\r\n    }\r\n  }\r\n  "],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAeE,MAAM;IACJ,KAAiB;IACjB,YAAsB;AACxB;IAIa;IAFZ,QAAQ;IACR,WAAW;;IACL,MAAM;;QACX,YAAY,AAAiB,cAA8B,CAAE;iBAAhC,iBAAA;;QAAiC;IAwDhE;;WAzDa;;;;;oBAGV;oBACA,aAAa;wBAAE,SAAS;oBAAuC;oBAC/D,QAAQ;wBAAE,MAAM;oBAAgB;;qBAC3B;uBAHN,eAGM,aAAa;gBAAA,CAAC;gBAAO,eAAgC;oBACzD,MAAM,SAAS,MAAM,IAAI,CAAC,cAAc,CAAC,YAAY,CACnD,gBAAgB,IAAI,EACpB,gBAAgB,WAAW;oBAE7B,OAAO;gBACT;;;;;oBAEC,KAAK;oBACL,aAAa;wBAAE,SAAS;oBAAgC;;qBACnD;uBAFN,eAEM,eAAe;gBAAA,CAAC,MAAM;gBAAM,EAAU;oBAC1C,OAAO,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC;gBAC5C;;;;;oBAEC,IAAI;oBACJ,aAAa;wBAAE,SAAS;oBAAiC;;qBACpD;uBAFN,eAEM,aAAa;gBAAA,CAAC,MAAM;gBAAM,EAAU,EAAE;gBAAA,CAAC;gBAAM,GAAa;oBAC9D,IAAI,SAAS,CAAC,gBAAgB;oBAC9B,IAAI,SAAS,CAAC,iBAAiB;oBAC/B,IAAI,SAAS,CAAC,cAAc;oBAE5B,IAAI;wBACF,WAAW,MAAM,SAAS,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,IAAK;4BACtE,IAAI,KAAK,CAAC,CAAC,MAAM,EAAE,KAAK,SAAS,CAAC;gCAAE;4BAAM,GAAG,IAAI,CAAC;wBACpD;wBACA,IAAI,KAAK,CAAC,CAAC,MAAM,EAAE,KAAK,SAAS,CAAC;4BAAE,MAAM;wBAAK,GAAG,IAAI,CAAC;wBACvD,IAAI,GAAG;oBACT,EAAE,OAAO,OAAO;wBACd,IAAI,KAAK,CAAC,CAAC,MAAM,EAAE,KAAK,SAAS,CAAC;4BAAE,OAAO,MAAM,OAAO;wBAAC,GAAG,IAAI,CAAC;wBACjE,IAAI,GAAG;oBACT;gBACF;;;;;oBAEC;oBACA,aAAa;wBAAE,SAAS;oBAA6B;;qBAChD;uBAFN,eAEM;oBACJ,OAAO,IAAI,CAAC,cAAc,CAAC,aAAa;gBAC1C;;;;;oBAEC,IAAI;oBACJ,aAAa;wBAAE,SAAS;oBAAiC;;qBACpD;uBAFN,eAEM,UAAU;gBAAA,CAAC,MAAM;gBAAM,EAAU;oBACrC,OAAO,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC;gBACvC;;;;;oBAEC,OAAO;oBACP,aAAa;wBAAE,SAAS;oBAAsB;;qBACzC;uBAFN,eAEM,aAAa;gBAAA,CAAC,MAAM;gBAAM,EAAU;oBACxC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;oBACjC,OAAO;wBAAE,SAAS;oBAA+B;gBACnD"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/Test%20Technique/Frontend/frontend/components/DocumentList.tsx"],"sourcesContent":["import { Module } from '@nestjs/common';\r\nimport { WebSocketGateway } from './websocket.gateway';\r\n\r\n@Module({\r\n  providers: [WebSocketGateway],\r\n  exports: [WebSocketGateway],\r\n})\r\nexport class WebSocketModule {}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;IAOa;IAJZ,OAAO;QACN,WAAW;YAAC;SAAiB;QAC7B,SAAS;YAAC;SAAiB;IAC7B;;IACO,MAAM;;;;IAAiB;;WAAjB"}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/Test%20Technique/Frontend/frontend/components/ReportGenerator.tsx"],"sourcesContent":["import {\r\n    WebSocketGateway,\r\n    WebSocketServer,\r\n    OnGatewayConnection,\r\n    OnGatewayDisconnect,\r\n  } from '@nestjs/websockets';\r\n  import { Server, Socket } from 'socket.io';\r\n  import { Logger } from '@nestjs/common';\r\n  import { Report } from '../reports/reports.service';\r\n  \r\n  @WebSocketGateway({\r\n    cors: {\r\n      origin: process.env.CORS_ORIGIN || 'http://localhost:3000',\r\n      credentials: true,\r\n    },\r\n  })\r\n  export class WebSocketGateway implements OnGatewayConnection, OnGatewayDisconnect {\r\n    @WebSocketServer()\r\n    server: Server;\r\n  \r\n    private readonly logger = new Logger(WebSocketGateway.name);\r\n  \r\n    handleConnection(client: Socket) {\r\n      this.logger.log(`Client connecté: ${client.id}`);\r\n    }\r\n  \r\n    handleDisconnect(client: Socket) {\r\n      this.logger.log(`Client déconnecté: ${client.id}`);\r\n    }\r\n  \r\n    /**\r\n     * Émet une mise à jour de rapport à tous les clients\r\n     */\r\n    emitReportUpdate(report: Report) {\r\n      this.server.emit('report:update', report);\r\n      this.logger.log(`Mise à jour du rapport ${report.id} envoyée`);\r\n    }\r\n  \r\n    /**\r\n     * Émet une mise à jour de document à tous les clients\r\n     */\r\n    emitDocumentUpdate(document: any) {\r\n      this.server.emit('document:update', document);\r\n      this.logger.log(`Mise à jour du document envoyée`);\r\n    }\r\n  }\r\n  "],"names":[],"mappings":";;;;AAYc;;;;;;;;;;;;;;;IAIC;IANZ,iBAAiB;QAChB,MAAM;YACJ,QAAQ,iOAAO,CAAC,GAAG,CAAC,WAAW,IAAI;YACnC,aAAa;QACf;IACF;;IACO,MAAM;;;;IA6Bb;;WA7Ba;;YACX;;;oBAAC;;qBACD;;YAAc;YAEd;;qBAAiB;;2BAAS,IAAI,OAAO,iBAAiB,IAAI;;YAAC;;;qBAE3D;uBAAA,SAAA,iBAAiB,MAAc;oBAC7B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,OAAO,EAAE,EAAE;gBACjD;;;;qBAEA;uBAAA,SAAA,iBAAiB,MAAc;oBAC7B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,mBAAmB,EAAE,OAAO,EAAE,EAAE;gBACnD;;;;qBAKA,AAHA;;KAEC,GACD;uBAAA,SAAA,iBAAiB,MAAc;oBAC7B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,iBAAiB;oBAClC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,OAAO,EAAE,CAAC,QAAQ,CAAC;gBAC/D;;;;qBAKA,AAHA;;KAEC,GACD;uBAAA,SAAA,mBAAmB,QAAa;oBAC9B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,mBAAmB;oBACpC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,+BAA+B,CAAC;gBACnD"}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/Test%20Technique/Frontend/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport DocumentUpload from '@/components/DocumentUpload';\nimport DocumentList from '@/components/DocumentList';\nimport ReportGenerator from '@/components/ReportGenerator';\nimport { useState, useEffect } from 'react';\nimport { io, Socket } from 'socket.io-client';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\nexport default function Home() {\n  const [socket, setSocket] = useState<Socket | null>(null);\n\n  useEffect(() => {\n    // Connexion WebSocket pour les mises à jour en temps réel\n    const newSocket = io(process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001', {\n      transports: ['websocket'],\n    });\n\n    newSocket.on('connect', () => {\n      console.log('Connecté au serveur WebSocket');\n    });\n\n    newSocket.on('report:update', (report) => {\n      console.log('Mise à jour du rapport:', report);\n      queryClient.invalidateQueries({ queryKey: ['reports'] });\n    });\n\n    newSocket.on('document:update', (document) => {\n      console.log('Mise à jour du document:', document);\n      queryClient.invalidateQueries({ queryKey: ['documents'] });\n    });\n\n    setSocket(newSocket);\n\n    return () => {\n      newSocket.close();\n    };\n  }, []);\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <div className=\"min-h-screen bg-gray-50\">\n        <header className=\"bg-white shadow-sm border-b border-gray-200\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n            <h1 className=\"text-3xl font-bold text-gray-900\">\n              Gestion de Documents Juridiques et Financiers\n            </h1>\n            <p className=\"mt-2 text-gray-600\">\n              Upload, analyse et génération de rapports avec IA\n            </p>\n          </div>\n        </header>\n\n        <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"space-y-8\">\n            {/* Section Upload */}\n            <section>\n              <DocumentUpload />\n            </section>\n\n            {/* Section Documents */}\n            <section>\n              <DocumentList />\n            </section>\n\n            {/* Section Génération de Rapports */}\n            <section>\n              <ReportGenerator />\n            </section>\n          </div>\n        </main>\n\n        <footer className=\"bg-white border-t border-gray-200 mt-12\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n            <p className=\"text-center text-gray-500 text-sm\">\n              Système de gestion de documents avec IA - Powered by Groq & MinIO\n            </p>\n          </div>\n        </footer>\n      </div>\n    </QueryClientProvider>\n  );\n}\n"],"names":[],"mappings":";;;;AAsByB;;AApBzB;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASA,MAAM,cAAc,IAAI,qPAAW,CAAC;IAClC,gBAAgB;QACd,SAAS;YACP,sBAAsB;QACxB;IACF;AACF;AAEe,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+NAAQ,EAAgB;IAEpD,IAAA,gOAAS;0BAAC;YACR,0DAA0D;YAC1D,MAAM,YAAY,IAAA,8OAAE,EAAC,6DAAmC,yBAAyB;gBAC/E,YAAY;oBAAC;iBAAY;YAC3B;YAEA,UAAU,EAAE,CAAC;kCAAW;oBACtB,QAAQ,GAAG,CAAC;gBACd;;YAEA,UAAU,EAAE,CAAC;kCAAiB,CAAC;oBAC7B,QAAQ,GAAG,CAAC,2BAA2B;oBACvC,YAAY,iBAAiB,CAAC;wBAAE,UAAU;4BAAC;yBAAU;oBAAC;gBACxD;;YAEA,UAAU,EAAE,CAAC;kCAAmB,CAAC;oBAC/B,QAAQ,GAAG,CAAC,4BAA4B;oBACxC,YAAY,iBAAiB,CAAC;wBAAE,UAAU;4BAAC;yBAAY;oBAAC;gBAC1D;;YAEA,UAAU;YAEV;kCAAO;oBACL,UAAU,KAAK;gBACjB;;QACF;yBAAG,EAAE;IAEL,qBACE,mPAAC,sQAAmB;QAAC,QAAQ;kBAC3B,cAAA,mPAAC;YAAI,WAAU;;8BACb,mPAAC;oBAAO,WAAU;8BAChB,cAAA,mPAAC;wBAAI,WAAU;;0CACb,mPAAC;gCAAG,WAAU;0CAAmC;;;;;;0CAGjD,mPAAC;gCAAE,WAAU;0CAAqB;;;;;;;;;;;;;;;;;8BAMtC,mPAAC;oBAAK,WAAU;8BACd,cAAA,mPAAC;wBAAI,WAAU;;0CAEb,mPAAC;0CACC,cAAA,mPAAC,iMAAc;;;;;;;;;;0CAIjB,mPAAC;0CACC,cAAA,mPAAC,+LAAY;;;;;;;;;;0CAIf,mPAAC;0CACC,cAAA,mPAAC,kMAAe;;;;;;;;;;;;;;;;;;;;;8BAKtB,mPAAC;oBAAO,WAAU;8BAChB,cAAA,mPAAC;wBAAI,WAAU;kCACb,cAAA,mPAAC;4BAAE,WAAU;sCAAoC;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ7D;GAzEwB;KAAA"}}]
}